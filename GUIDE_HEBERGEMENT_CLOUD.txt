================================================================================
           GUIDE COMPLET : H√âBERGEMENT CLOUD PYTHONANYWHERE
                        Elite Pronos 2
================================================================================

üìå OBJECTIF
-----------
H√©berger l'application Elite Pronos 2 sur un serveur cloud qui tourne 24h/24
pour que les joueurs puissent se connecter √† tout moment, m√™me quand ton PC
est √©teint.


================================================================================
PARTIE 1 : POURQUOI PYTHONANYWHERE ?
================================================================================

‚úÖ AVANTAGES :
- Gratuit jusqu'√† un certain niveau (suffisant pour tester)
- Formule payante √† 5‚Ç¨/mois (tr√®s abordable)
- H√©bergement Python natif (parfait pour notre app)
- Base de donn√©es incluse
- Daemon peut tourner 24h/24
- Interface web simple
- Support par email

‚ùå INCONV√âNIENTS :
- N√©cessite quelques adaptations du code
- Configuration initiale (1-2h la premi√®re fois)


================================================================================
PARTIE 2 : INSCRIPTION ET CONFIGURATION COMPTE
================================================================================

√âTAPE 1 : CR√âER UN COMPTE
--------------------------
1. Va sur : https://www.pythonanywhere.com
2. Clic sur "Pricing & signup"
3. Choisis :
   - Formule GRATUITE pour tester (limites : 1 app web, pas de daemon 24h/24)
   - Formule "Hacker" √† 5‚Ç¨/mois (RECOMMAND√â) : daemon 24h/24 inclus
4. Cr√©e ton compte avec email et mot de passe
5. Confirme ton email


√âTAPE 2 : SE CONNECTER AU DASHBOARD
------------------------------------
1. Va sur : https://www.pythonanywhere.com/login
2. Connecte-toi
3. Tu arrives sur le Dashboard

Le Dashboard contient :
- Files : G√©rer tes fichiers
- Consoles : Terminal pour ex√©cuter des commandes
- Web : Configurer ton application web
- Tasks : T√¢ches planifi√©es
- Databases : G√©rer ta base de donn√©es


================================================================================
PARTIE 3 : UPLOAD DE L'APPLICATION
================================================================================

M√âTHODE 1 : VIA INTERFACE WEB (Plus simple)
--------------------------------------------

1. Dans le Dashboard, clic sur "Files"

2. Clique sur "Upload a file"

3. Upload ces fichiers/dossiers :
   - Tout le dossier modules/ (un par un ou zipper d'abord)
   - database/pronos_expert.db
   - main.py
   - daemon_automation.py
   - requirements.txt (√† cr√©er, voir ci-dessous)

4. Cr√©e un fichier requirements.txt dans Files :
   
   Contenu du fichier :
   ```
   requests==2.31.0
   python-docx==1.1.0
   schedule==1.2.2
   Pillow==10.1.0
   ```


M√âTHODE 2 : VIA GIT (Avanc√© mais recommand√©)
---------------------------------------------

1. Pousse ton projet sur GitHub

2. Dans PythonAnywhere, ouvre une Console "Bash"

3. Clone ton repo :
   ```
   git clone https://github.com/TON_USERNAME/elite_pronos_2.git
   cd elite_pronos_2
   ```

4. Installe les d√©pendances :
   ```
   pip3 install --user -r requirements.txt
   ```


================================================================================
PARTIE 4 : CONFIGURATION BASE DE DONN√âES
================================================================================

OPTION 1 : GARDER SQLite (Simple)
----------------------------------
Ta base de donn√©es actuelle (pronos_expert.db) fonctionne tel quel.

Assure-toi juste que le chemin est correct dans config.py :
```python
DB_PATH = "/home/TON_USERNAME/elite_pronos_2/database/pronos_expert.db"
```


OPTION 2 : MySQL (Plus performant, recommand√© long terme)
----------------------------------------------------------

1. Dans Dashboard ‚Üí Databases
2. Clic sur "Initialize" pour cr√©er ta base MySQL
3. Note les infos de connexion :
   - Host : TON_USERNAME.mysql.pythonanywhere-services.com
   - Database : TON_USERNAME$elitepronos
   - Username : TON_USERNAME
   - Password : [ton mot de passe choisi]

4. Modifie database_manager.py pour utiliser MySQL :
   
   Ajoute en haut du fichier :
   ```python
   import mysql.connector
   ```

   Modifie create_connection() :
   ```python
   def create_connection(self):
       try:
           conn = mysql.connector.connect(
               host='TON_USERNAME.mysql.pythonanywhere-services.com',
               user='TON_USERNAME',
               password='TON_MOT_DE_PASSE',
               database='TON_USERNAME$elitepronos'
           )
           return conn
       except Exception as e:
           print(f"Erreur connexion : {e}")
           return None
   ```

5. Importe ta base SQLite vers MySQL (via script ou manuellement)


================================================================================
PARTIE 5 : CONFIGURER L'APPLICATION WEB
================================================================================

√âTAPE 1 : CR√âER UNE WEB APP
----------------------------

1. Dashboard ‚Üí Web
2. Clic "Add a new web app"
3. Choisis ton domaine : TON_USERNAME.pythonanywhere.com
4. Framework : "Manual configuration"
5. Python version : Python 3.10 (ou 3.11)


√âTAPE 2 : CONFIGURER WSGI
--------------------------

1. Dans la page Web de ton app, trouve "Code" section
2. Clic sur le lien WSGI configuration file
3. Remplace tout le contenu par :

```python
import sys
import os

# Ajouter ton projet au path
project_home = '/home/TON_USERNAME/elite_pronos_2'
if project_home not in sys.path:
    sys.path = [project_home] + sys.path

# Importer ton application Flask
from web_app import app as application

# Alternative si tu utilises Tkinter (pas recommand√© pour web)
# Il faudra cr√©er une version web de ton interface
```

NOTE IMPORTANTE : L'interface Tkinter actuelle ne fonctionne PAS sur le web.
Il faut cr√©er une interface web (Flask ou Django). Voir PARTIE 7.


√âTAPE 3 : RECHARGER L'APP
--------------------------

1. En haut de la page Web, clic sur le bouton vert "Reload TON_USERNAME.pythonanywhere.com"
2. Ton app est maintenant accessible sur : https://TON_USERNAME.pythonanywhere.com


================================================================================
PARTIE 6 : CONFIGURER LE DAEMON (FORMULE PAYANTE UNIQUEMENT)
================================================================================

IMPORTANT : Le daemon 24h/24 n√©cessite la formule "Hacker" √† 5‚Ç¨/mois minimum.

√âTAPE 1 : CR√âER UN FICHIER DE DAEMON
-------------------------------------

1. Cr√©e un fichier daemon_runner.sh :

```bash
#!/bin/bash
cd /home/TON_USERNAME/elite_pronos_2
python3 daemon_automation.py
```

2. Rends-le ex√©cutable :
```bash
chmod +x daemon_runner.sh
```


√âTAPE 2 : CONFIGURER COMME PROCESSUS TOUJOURS ACTIF
----------------------------------------------------

1. Dashboard ‚Üí Tasks
2. Dans "Always-on tasks" (formule payante uniquement)
3. Command : /home/TON_USERNAME/elite_pronos_2/daemon_runner.sh
4. Clic "Create"

Le daemon tournera maintenant en permanence et se relancera automatiquement
s'il plante.


√âTAPE 3 : ALTERNATIVE SI FORMULE GRATUITE
------------------------------------------

Avec la formule gratuite, tu ne peux pas avoir de daemon 24h/24.
Alternative : Utilise les "Scheduled tasks"

1. Dashboard ‚Üí Tasks
2. Cr√©e plusieurs t√¢ches planifi√©es :

   V√©rification toutes les heures :
   Command : /home/TON_USERNAME/elite_pronos_2/verifier_actions.py
   Schedule : Hourly at :00

3. Cr√©e verifier_actions.py :
```python
from daemon_automation import DaemonAutomation

daemon = DaemonAutomation()
daemon.verifier_actions()
```


================================================================================
PARTIE 7 : ADAPTER L'INTERFACE POUR LE WEB
================================================================================

PROBL√àME : Tkinter ne fonctionne pas sur un serveur web.

SOLUTION : Cr√©er une interface web avec Flask.

√âTAPE 1 : INSTALLER FLASK
--------------------------

Dans Console Bash :
```bash
pip3 install --user flask flask-login
```


√âTAPE 2 : CR√âER web_app.py
---------------------------

Cr√©e un nouveau fichier web_app.py √† la racine :

```python
from flask import Flask, render_template, request, redirect, url_for, session
from modules.database_manager import DatabaseManager

app = Flask(__name__)
app.secret_key = 'TON_SECRET_KEY_ALEATOIRE_ICI'

@app.route('/')
def index():
    if 'user_id' in session:
        return redirect(url_for('dashboard'))
    return redirect(url_for('login'))

@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        pseudo = request.form['pseudo']
        password = request.form['password']
        
        db = DatabaseManager()
        conn = db.create_connection()
        cursor = conn.cursor()
        
        cursor.execute("""
            SELECT id, pseudo, prenom FROM utilisateurs 
            WHERE pseudo = ? AND mot_de_passe = ? AND statut = 'actif'
        """, (pseudo, password))
        
        user = cursor.fetchone()
        conn.close()
        
        if user:
            session['user_id'] = user[0]
            session['pseudo'] = user[1]
            session['prenom'] = user[2]
            return redirect(url_for('dashboard'))
        else:
            return render_template('login.html', error="Identifiants incorrects")
    
    return render_template('login.html')

@app.route('/dashboard')
def dashboard():
    if 'user_id' not in session:
        return redirect(url_for('login'))
    
    # R√©cup√©rer les infos du joueur
    db = DatabaseManager()
    conn = db.create_connection()
    cursor = conn.cursor()
    
    # Points totaux
    cursor.execute("""
        SELECT SUM(points_totaux) FROM historique 
        WHERE utilisateur_id = ?
    """, (session['user_id'],))
    points_totaux = cursor.fetchone()[0] or 0
    
    # Classement
    cursor.execute("""
        SELECT COUNT(*) + 1 FROM (
            SELECT SUM(points_totaux) as total 
            FROM historique 
            GROUP BY utilisateur_id 
            HAVING total > ?
        )
    """, (points_totaux,))
    classement = cursor.fetchone()[0]
    
    conn.close()
    
    return render_template('dashboard.html', 
                         pseudo=session['pseudo'],
                         points=points_totaux,
                         classement=classement)

@app.route('/pronos')
def pronos():
    if 'user_id' not in session:
        return redirect(url_for('login'))
    
    # R√©cup√©rer les matchs de la semaine actuelle
    db = DatabaseManager()
    conn = db.create_connection()
    cursor = conn.cursor()
    
    # Trouver la semaine en cours
    cursor.execute("""
        SELECT semaine FROM journees_calendrier 
        WHERE statut = 'a_venir' 
        ORDER BY semaine 
        LIMIT 1
    """)
    semaine_row = cursor.fetchone()
    
    if not semaine_row:
        return render_template('pronos.html', matchs=[], message="Aucune journ√©e disponible")
    
    semaine = semaine_row[0]
    
    # R√©cup√©rer les matchs
    cursor.execute("""
        SELECT id, equipe_domicile, equipe_exterieur, cote_domicile, cote_nul, cote_exterieur
        FROM matchs 
        WHERE semaine = ?
        ORDER BY id
    """, (semaine,))
    
    matchs = cursor.fetchall()
    conn.close()
    
    return render_template('pronos.html', matchs=matchs, semaine=semaine)

@app.route('/sauvegarder_pronos', methods=['POST'])
def sauvegarder_pronos():
    if 'user_id' not in session:
        return redirect(url_for('login'))
    
    semaine = request.form['semaine']
    
    db = DatabaseManager()
    conn = db.create_connection()
    cursor = conn.cursor()
    
    # Supprimer les anciens pronos
    cursor.execute("""
        DELETE FROM pronostics 
        WHERE utilisateur_id = ? AND semaine = ?
    """, (session['user_id'], semaine))
    
    # Enregistrer les nouveaux pronos
    for key in request.form:
        if key.startswith('prono_'):
            match_id = int(key.split('_')[1])
            prono = request.form[key]
            
            cursor.execute("""
                INSERT INTO pronostics (utilisateur_id, match_id, semaine, pronostic)
                VALUES (?, ?, ?, ?)
            """, (session['user_id'], match_id, semaine, prono))
    
    conn.commit()
    conn.close()
    
    return redirect(url_for('dashboard'))

@app.route('/logout')
def logout():
    session.clear()
    return redirect(url_for('login'))

if __name__ == '__main__':
    app.run(debug=True)
```


√âTAPE 3 : CR√âER LES TEMPLATES HTML
-----------------------------------

Cr√©e un dossier templates/ √† la racine.

Dans templates/, cr√©e :

1. base.html :
```html
<!DOCTYPE html>
<html>
<head>
    <title>Elite Pronos 2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #0A1628;
            color: white;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #FFD700;
        }
        .btn {
            background-color: #FFD700;
            color: black;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
</body>
</html>
```

2. login.html :
```html
{% extends "base.html" %}
{% block content %}
<h1>üéÆ Elite Pronos 2 - Connexion</h1>
{% if error %}
<p style="color: red;">{{ error }}</p>
{% endif %}
<form method="POST">
    <input type="text" name="pseudo" placeholder="Pseudo" required><br><br>
    <input type="password" name="password" placeholder="Mot de passe" required><br><br>
    <button type="submit" class="btn">Se connecter</button>
</form>
{% endblock %}
```

3. dashboard.html :
```html
{% extends "base.html" %}
{% block content %}
<h1>üèÜ Dashboard - {{ pseudo }}</h1>
<p>Points totaux : <strong>{{ points }}</strong></p>
<p>Classement : <strong>#{{ classement }}</strong></p>
<br>
<a href="{{ url_for('pronos') }}" class="btn">üìù Faire mes pronos</a>
<a href="{{ url_for('logout') }}" class="btn">üö™ D√©connexion</a>
{% endblock %}
```

4. pronos.html :
```html
{% extends "base.html" %}
{% block content %}
<h1>üìù Pronos - Semaine {{ semaine }}</h1>
{% if message %}
<p>{{ message }}</p>
{% else %}
<form method="POST" action="{{ url_for('sauvegarder_pronos') }}">
    <input type="hidden" name="semaine" value="{{ semaine }}">
    {% for match in matchs %}
    <div style="background: #1A1A1A; padding: 15px; margin: 10px 0; border-radius: 8px;">
        <h3>{{ match[1] }} vs {{ match[2] }}</h3>
        <label><input type="radio" name="prono_{{ match[0] }}" value="1" required> Domicile ({{ match[3] }})</label><br>
        <label><input type="radio" name="prono_{{ match[0] }}" value="N"> Nul ({{ match[4] }})</label><br>
        <label><input type="radio" name="prono_{{ match[0] }}" value="2"> Ext√©rieur ({{ match[5] }})</label>
    </div>
    {% endfor %}
    <br>
    <button type="submit" class="btn">üíæ Enregistrer mes pronos</button>
</form>
{% endif %}
{% endblock %}
```


================================================================================
PARTIE 8 : TESTS ET VALIDATION
================================================================================

√âTAPE 1 : TESTER LOCALEMENT
----------------------------

Avant de d√©ployer, teste sur ton PC :

```bash
cd elite_pronos_2
python web_app.py
```

Ouvre http://localhost:5000 dans ton navigateur


√âTAPE 2 : D√âPLOYER SUR PYTHONANYWHERE
--------------------------------------

1. Upload web_app.py et le dossier templates/
2. Configure le WSGI (voir PARTIE 5)
3. Reload l'application
4. Teste sur https://TON_USERNAME.pythonanywhere.com


√âTAPE 3 : V√âRIFIER LE DAEMON
-----------------------------

1. Dashboard ‚Üí Consoles ‚Üí Bash
2. V√©rifie les logs :
   ```bash
   tail -f /var/log/TON_USERNAME.pythonanywhere.com.error.log
   ```


================================================================================
PARTIE 9 : MAINTENANCE ET MONITORING
================================================================================

SURVEILLANCE
------------

1. V√©rifie r√©guli√®rement que le daemon tourne :
   Dashboard ‚Üí Tasks ‚Üí Always-on tasks ‚Üí Check status

2. Consulte les logs d'erreur :
   Dashboard ‚Üí Web ‚Üí Log files

3. Teste l'acc√®s web chaque semaine


SAUVEGARDES
-----------

1. Dashboard ‚Üí Files
2. Download ta base de donn√©es r√©guli√®rement
3. Garde une copie locale sur ton PC


MISE √Ä JOUR DU CODE
--------------------

Si tu modifies le code :

1. M√©thode Git (recommand√©) :
   ```bash
   cd elite_pronos_2
   git pull
   ```

2. M√©thode manuelle :
   - Upload les fichiers modifi√©s via Files
   - Reload l'application Web


================================================================================
PARTIE 10 : D√âPANNAGE
================================================================================

PROBL√àME : "Import Error" dans les logs
SOLUTION : V√©rifie que tous les packages sont install√©s
   pip3 install --user -r requirements.txt


PROBL√àME : Le daemon ne d√©marre pas
SOLUTION : V√©rifie les logs, assure-toi d'avoir la formule payante


PROBL√àME : Base de donn√©es locked
SOLUTION : SQLite a des limites en concurrent. Passe √† MySQL (voir PARTIE 4)


PROBL√àME : L'app web ne r√©pond pas
SOLUTION : Reload l'app depuis le Dashboard ‚Üí Web


================================================================================
PARTIE 11 : CO√õTS ET FORMULES
================================================================================

FORMULE GRATUITE (Beginner)
----------------------------
- 1 application web
- 512 MB storage
- Pas de daemon 24h/24
- Scheduled tasks limit√©s

Prix : GRATUIT


FORMULE HACKER (Recommand√©e)
-----------------------------
- Tout de la formule gratuite +
- Always-on tasks (daemon 24h/24) ‚úÖ
- 1 GB storage
- Plus de CPU time

Prix : 5 USD/mois (‚âà 5‚Ç¨/mois)


FORMULE WEB DEV
---------------
- Tout de la formule Hacker +
- 10 GB storage
- Plus de scheduled tasks
- Support prioritaire

Prix : 12 USD/mois


RECOMMANDATION : Commence avec Hacker (5‚Ç¨/mois), c'est largement suffisant.


================================================================================
PARTIE 12 : CHECKLIST FINALE
================================================================================

AVANT DE D√âPLOYER :
‚òê Compte PythonAnywhere cr√©√© (formule Hacker recommand√©e)
‚òê Code upload√© sur PythonAnywhere
‚òê requirements.txt cr√©√© et d√©pendances install√©es
‚òê Base de donn√©es upload√©e ou migr√©e vers MySQL
‚òê web_app.py cr√©√© avec templates HTML
‚òê WSGI configur√©
‚òê Application web test√©e
‚òê Daemon configur√© (formule payante uniquement)
‚òê Email SMTP configur√© dans config.py
‚òê Tests de connexion r√©ussis

APR√àS D√âPLOIEMENT :
‚òê Interface web accessible 24h/24
‚òê Joueurs peuvent se connecter
‚òê Pronos enregistr√©s correctement
‚òê Daemon tourne en permanence
‚òê Emails envoy√©s automatiquement
‚òê Sauvegardes r√©guli√®res configur√©es


================================================================================
FIN DU GUIDE - H√âBERGEMENT CLOUD PYTHONANYWHERE
================================================================================

Si tu as des questions ou rencontres des probl√®mes, consulte :
- Documentation PythonAnywhere : https://help.pythonanywhere.com
- Forum PythonAnywhere : https://www.pythonanywhere.com/forums/
- Support email : support@pythonanywhere.com

Bonne chance avec ton d√©ploiement ! üöÄ
